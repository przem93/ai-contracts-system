{
  "openapi": "3.0.0",
  "paths": {
    "/api": {
      "get": {
        "operationId": "AppController_getHello",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/api/neo4j/verify": {
      "get": {
        "operationId": "AppController_verifyNeo4jConnection",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        }
      }
    },
    "/api/contracts": {
      "get": {
        "operationId": "ContractsController_getAllContracts",
        "summary": "Get all contracts",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Returns all contract files with their parsed content",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ContractFileDto"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "contracts"
        ]
      }
    },
    "/api/contracts/validate": {
      "get": {
        "operationId": "ContractsController_validateContracts",
        "summary": "Validate all contracts",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Returns validation results for all contract files",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "contracts"
        ]
      }
    },
    "/api/contracts/apply": {
      "post": {
        "operationId": "ContractsController_applyContracts",
        "summary": "Apply contract changes to Neo4j database",
        "description": "Validates all contracts first, then applies them to the Neo4j database if validation passes. Clears existing data before applying.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Contracts successfully applied to database",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApplyResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Contract validation failed - invalid contracts detected"
          },
          "500": {
            "description": "Failed to apply contracts to database"
          }
        },
        "tags": [
          "contracts"
        ]
      }
    }
  },
  "info": {
    "title": "AI Contracts System API",
    "description": "API for managing and validating technical dependency contracts",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "schemas": {
      "ContractFileDto": {
        "type": "object",
        "properties": {
          "fileName": {
            "type": "string",
            "description": "The name of the contract file",
            "example": "example-contract.yml"
          },
          "filePath": {
            "type": "string",
            "description": "The full path to the contract file",
            "example": "/contracts/example-contract.yml"
          },
          "content": {
            "type": "object",
            "description": "The parsed contract content"
          }
        },
        "required": [
          "fileName",
          "filePath",
          "content"
        ]
      },
      "ValidationErrorDto": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The path to the field with the validation error",
            "example": "dependencies.0.module_id"
          },
          "message": {
            "type": "string",
            "description": "The validation error message",
            "example": "Referenced module \"users-permissions\" does not exist"
          }
        },
        "required": [
          "path",
          "message"
        ]
      },
      "ValidationFileDto": {
        "type": "object",
        "properties": {
          "filePath": {
            "type": "string",
            "description": "The full path to the contract file",
            "example": "/contracts/example-contract.yml"
          },
          "fileName": {
            "type": "string",
            "description": "The name of the contract file",
            "example": "example-contract.yml"
          },
          "valid": {
            "type": "boolean",
            "description": "Whether the contract file is valid",
            "example": true
          },
          "errors": {
            "description": "List of validation errors (only present if valid is false)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ValidationErrorDto"
            }
          }
        },
        "required": [
          "filePath",
          "fileName",
          "valid"
        ]
      },
      "ValidationResponseDto": {
        "type": "object",
        "properties": {
          "valid": {
            "type": "boolean",
            "description": "Whether all contracts are valid",
            "example": true
          },
          "files": {
            "description": "Validation results for each contract file",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ValidationFileDto"
            }
          }
        },
        "required": [
          "valid",
          "files"
        ]
      },
      "ApplyResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Whether the operation was successful",
            "example": true
          },
          "modulesProcessed": {
            "type": "number",
            "description": "Number of modules processed",
            "example": 5
          },
          "partsProcessed": {
            "type": "number",
            "description": "Number of parts processed",
            "example": 12
          },
          "message": {
            "type": "string",
            "description": "Success or error message",
            "example": "Successfully applied 5 modules and 12 parts to Neo4j"
          }
        },
        "required": [
          "success",
          "modulesProcessed",
          "partsProcessed",
          "message"
        ]
      }
    }
  }
}